#!/bin/bash

# Проверяем, передан ли аргумент
if [ -z "$1" ]; then
  echo "Ошибка: директория не указана."
  echo "Использование: $0 <directory>"
  exit 1
fi

# Сохраняем переданный аргумент в переменной DIR
DIR="$1"

# Проверяем, существует ли директория и является ли она директорией
if [ ! -d "$DIR" ]; then
  echo "Ошибка: '$DIR' не является директорией или не существует."
  exit 1
fi

# Ищем все текстовые файлы в указанной директории и подсчитываем количество строк
# Используем find для поиска файлов, xargs для передачи их в wc и wc -l для подсчета строк
# Обрабатываем ошибки xargs при передаче пустого списка
find "$DIR" -type f -name "*.txt" 2>/dev/null | xargs wc -l 2>/dev/null | tail -n 1

# Проверка кода выхода команды xargs, чтобы убедиться, что операция прошла успешно
if [ $? -ne 0 ]; then
  echo "Ошибка при подсчете строк в файлах."
  exit 1
fi

# Если все прошло успешно
echo "Подсчет строк завершен успешно."
exit 0
